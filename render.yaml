# Render Blueprint for CL8Y Bridge Frontend (SPA)
# BrowserRouter requires SPA fallback: all routes serve index.html
# https://render.com/docs/blueprint-spec
# https://render.com/docs/redirects-rewrites

services:
  - type: web
    name: cl8y-bridge-frontend
    runtime: static

    # Monorepo: build from frontend package
    rootDir: packages/frontend
    buildCommand: npm ci && NODE_OPTIONS=--max-old-space-size=4096 npm run build
    staticPublishPath: dist

    # SPA fallback for client-side routing (BrowserRouter)
    # Serves index.html for all paths so React Router can handle them
    routes:
      - type: rewrite
        source: /*
        destination: /index.html
